(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{184:function(e,t,a){e.exports=a(412)},206:function(e,t,a){},412:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(37),i=a.n(s),l="auth-token",o=a(163),c=a(8),u=a(118),m=a(119),p=a(115),h=(a(205),a(206),a(29)),d=a(182),f=a(40),v=a(3),E=a(4),b=a(6),y=a(5),g=a(7),O=a(14),w=a(417),j=a(169),k=a.n(j),C=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e="http://localhost:8000/public/no-files.png";return"avatar"===this.props.format&&(e="http://localhost:8000/public/avatar.jpg"),this.props.nameFile&&(e="http://localhost:8000/"+this.props.nameFile),r.a.createElement("div",null,"avatar"===this.props.format?r.a.createElement("div",null,r.a.createElement(k.a,{src:e})):r.a.createElement("div",{className:"crop"},this.props.nameFile&&r.a.createElement("img",{src:e,alt:"img"})))}}]),t}(r.a.Component),S=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.post.title;return this.props.isDraft&&(e="".concat(e," (Draft)")),r.a.createElement(w.a,{className:"no-underline ma1",to:"/post/".concat(this.props.post.id)},r.a.createElement("h2",{className:"f3 black-80 fw4 lh-solid"},e),r.a.createElement("p",{className:"black-80 fw3"},this.props.post.text),r.a.createElement(C,{nameFile:this.props.post.nameFile}))}}]),t}(r.a.Component),P=a(13),N=a.n(P),x=a(12),F=a.n(x),A=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Loading..")}}]),t}(n.Component);function M(){var e=Object(O.a)(["\n  query FeedQuery {\n    feed {\n      id\n      text\n      title\n      isPublished\n      nameFile\n    }\n  }\n"]);return M=function(){return e},e}var I=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.location.key!==e.location.key&&this.props.feedQuery.refetch()}},{key:"render",value:function(){var e=this;return this.props.feedQuery.loading?r.a.createElement(A,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement("h1",null,"Feed"),this.props.feedQuery.feed&&this.props.feedQuery.feed.map(function(t){return r.a.createElement(S,{key:t.id,post:t,refresh:function(){return e.props.feedQuery.refetch()},isDraft:!t.isPublished})}),this.props.children)))}}]),t}(r.a.Component),_=N()(M()),U=Object(c.graphql)(_,{name:"feedQuery",options:{fetchPolicy:"network-only"}})(I),B=a(11),D=a.n(B),$=a(170),Q=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},"Not authentificated!",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,{to:"/login"},"Login")))}}]),t}(n.Component),q=Object($.a)(Q);function L(){var e=Object(O.a)(["\n  query DraftsQuery {\n    drafts {\n      id\n      text\n      title\n      isPublished\n      nameFile\n    }\n  }\n"]);return L=function(){return e},e}var T=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.location.key!==e.location.key&&this.props.draftsQuery.refetch()}},{key:"render",value:function(){var e=this,t=localStorage.getItem(l);return this.props.draftsQuery.error?r.a.createElement(q,null):this.props.draftsQuery.loading?r.a.createElement(A,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement("div",{className:"flex justify-between items-center"},r.a.createElement("h1",null,"Drafts"),t&&r.a.createElement(D.a,{onClick:function(){return e.props.history.replace("/create")},variant:"contained",color:"primary"},"+ Create Draft")),this.props.draftsQuery.drafts&&this.props.draftsQuery.drafts.map(function(t){return r.a.createElement(S,{key:t.id,post:t,refresh:function(){return e.props.draftsQuery.refetch()},isDraft:!t.isPublished})}),this.props.children)))}}]),t}(r.a.Component),R=N()(L()),V=Object(c.graphql)(R,{name:"draftsQuery",options:{fetchPolicy:"network-only",errorPolicy:"ignore",variables:{skip:3}}})(T),K=a(55),W=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.props.car.name;return r.a.createElement("div",{className:"no-underline ma1 cursor",onClick:function(){return e.props.elemClicked(e.props.car)}},r.a.createElement("h2",{className:"f3 black-80 fw4 lh-solid"},t))}}]),t}(r.a.Component),Y=a(16),J=a.n(Y);function H(){var e=Object(O.a)(["\n  query CarsQueryConnection($after: String, $orderBy: CarOrderByInput, $where: CarWhereInput, $skip: Int) {\n    carsConnection(after: $after, orderBy: $orderBy, where: $where, first: 5, skip: $skip) {\n      pageInfo {\n        hasNextPage\n        endCursor\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n      aggregate {\n        count\n      }\n    }\n  }\n"]);return H=function(){return e},e}var z=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this;if(this.props.carsQueryConnection.error)return r.a.createElement(q,null);if(this.props.carsQueryConnection.loading)return r.a.createElement(A,null);var t=this.props.carsQueryConnection.carsConnection,a=t.edges,n=t.aggregate;return this.props.query||this.props.showWhenQueryEmpty?r.a.createElement(r.a.Fragment,null,this.props.showTitle&&r.a.createElement("h1",null,"Cars (",a.length,"/",n.count,")"),a&&a.map(function(t){return r.a.createElement(W,{key:t.node.id,elemClicked:e.props.elemClicked,car:t.node})}),a.length!==n.count&&this.props.showMore&&r.a.createElement("div",{onClick:function(){return e.loadMore()},className:"cursor"},r.a.createElement(J.a,null,"add"),"Load More"),this.props.children):null}},{key:"loadMore",value:function(){var e=this.props.carsQueryConnection;e.carsConnection.pageInfo.hasNextPage&&e.fetchMore({variables:{after:e.carsConnection.pageInfo.endCursor},updateQuery:function(e,t){var a=t.fetchMoreResult;return a?{carsConnection:{__typename:"CarConnection",aggregate:a.carsConnection.aggregate,pageInfo:a.carsConnection.pageInfo,edges:[].concat(Object(K.a)(e.carsConnection.edges),Object(K.a)(a.carsConnection.edges))}}:e}})}}]),t}(r.a.Component),G=N()(H()),X=Object(c.compose)(Object(c.graphql)(G,{name:"carsQueryConnection",fetchPolicy:"network-only",options:function(e){return{variables:{orderBy:e.orderBy,where:{name_contains:e.query}}}}}))(z),Z=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{onClick:function(){"name_ASC"===e.props.orderBy?e.props.onOrderBy("name_DESC"):e.props.onOrderBy("name_ASC")}},"name_ASC"===this.props.orderBy?r.a.createElement(J.a,null,"arrow_downward"):r.a.createElement(J.a,null,"arrow_upward"))}}]),t}(r.a.Component),ee=a(36),te=a.n(ee),ae=a(31),ne=a.n(ae),re=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(y.a)(t).call(this,e))).state={query:"",orderBy:"name_ASC"},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"elemClicked",value:function(e){this.props.history.push("/car/"+e.id)}},{key:"render",value:function(){var e=this;return localStorage.getItem(l)?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement(ne.a,{onChange:function(t){return e.setState({query:t.target.value})},value:this.state.query,type:"text",label:"Search",endAdornment:r.a.createElement(te.a,{position:"end"},this.state.query?r.a.createElement(J.a,{onClick:function(){e.setState({query:""})}},"clear"):r.a.createElement(J.a,{className:"white"},"sentiment_satisfied"),r.a.createElement(Z,{orderBy:this.state.orderBy,onOrderBy:function(t){return e.setState({orderBy:t})}}))})," ",r.a.createElement(D.a,{onClick:function(){return e.props.history.push("/car/create")},variant:"contained",color:"primary"},"+ Create Car"),r.a.createElement(X,{showWhenQueryEmpty:!0,query:this.state.query,showTitle:!0,showMore:!0,elemClicked:this.elemClicked.bind(this),orderBy:this.state.orderBy})))):r.a.createElement(q,null)}}]),t}(n.Component),se=Object($.a)(re),ie=a(172),le=a.n(ie),oe=a(173),ce=a.n(oe),ue=a(54),me=a(298),pe=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"openProfile",value:function(e){this.props.history.push("/user/"+e.id)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(le.a,null,r.a.createElement(ce.a,{avatar:r.a.createElement("div",null,this.props.chat.author&&r.a.createElement("div",{onClick:function(){return e.openProfile(e.props.chat.author)}},r.a.createElement(C,{format:"avatar",nameFile:this.props.chat.author.nameFile}))),title:r.a.createElement("b",null,this.props.chat.message),subheader:me(ue(this.props.chat.createdAt),"MM/DD/YYYY hh:mma")})))}}]),t}(r.a.Component),he=Object($.a)(pe);function de(){var e=Object(O.a)(["\n  subscription {\n    chat(where:{mutation_in: [CREATED]}) {\n      node {\n        id\n        message\n        createdAt\n        author {\n          id\n          name\n          nameFile\n        }\n      }\n    }\n  }\n"]);return de=function(){return e},e}function fe(){var e=Object(O.a)(["\n  query ChatsQueryConnection($after: String, $orderBy: ChatOrderByInput, $where: ChatWhereInput, $skip: Int) {\n    chatsConnection(after: $after, orderBy: $orderBy, where: $where, last: 5, skip: $skip) {\n      edges {\n        node {\n          id\n          message\n          createdAt\n          author {\n            id\n            name\n            nameFile\n          }\n        }\n      }\n    }\n  }\n"]);return fe=function(){return e},e}var ve=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.chatsQueryConnection.subscribeToMore({document:be,updateQuery:function(e,t){var a=t.subscriptionData;return a?Object.assign({},e,{chatsConnection:{__typename:"ChatConnection",edges:[].concat(Object(K.a)(e.chatsConnection.edges),[a.data.chat])}}):e}})}},{key:"componentDidUpdate",value:function(){this.messagesEnd&&this.messagesEnd.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e=this;if(this.props.chatsQueryConnection.error)return r.a.createElement(q,null);if(this.props.chatsQueryConnection.loading)return r.a.createElement(A,null);var t=this.props.chatsQueryConnection.chatsConnection.edges;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{height:"350px",overflow:"scroll"},className:"listChats"},t&&t.map(function(e){return r.a.createElement(he,{key:e.node.id,chat:e.node})}),r.a.createElement("div",{ref:function(t){e.messagesEnd=t}})))}}]),t}(r.a.Component),Ee=N()(fe()),be=N()(de()),ye=Object(c.compose)(Object(c.graphql)(Ee,{name:"chatsQueryConnection",fetchPolicy:"network-only",options:function(e){return{variables:{orderBy:e.orderBy}}}}))(ve),ge=a(17),Oe=a.n(ge),we=a(28),je=a(418),ke=a(32),Ce=a.n(ke),Se=a(33),Pe=a.n(Se);function Ne(){var e=Object(O.a)(["\n  mutation CreateChatMutation($message: String!) {\n    createChat(data: {message: $message}) {\n      id\n      message\n    }\n  }\n"]);return Ne=function(){return e},e}var xe=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={message:""},a.handleChat=function(){var e=Object(we.a)(Oe.a.mark(function e(t){var n;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state.message,e.next=4,a.props.createChatMutation({variables:{message:n}});case 4:a.setState({message:""});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement("form",{onSubmit:this.handleChat},r.a.createElement(Ce.a,{className:"width100Perc"},r.a.createElement(Pe.a,{htmlFor:"message"},"Message"),r.a.createElement(ne.a,{id:"message",autoComplete:"off",onChange:function(t){return e.setState({message:t.target.value})},value:this.state.message,endAdornment:r.a.createElement(te.a,{position:"end"},r.a.createElement(D.a,{onClick:this.handleNext,disabled:!this.state.message,type:"submit",variant:"fab",color:"primary",mini:!0},r.a.createElement(J.a,null,"navigate_next")))})))))}}]),t}(r.a.Component),Fe=N()(Ne()),Ae=Object(c.compose)(Object(c.graphql)(Fe,{name:"createChatMutation"}),je.a,c.withApollo)(xe),Me=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={orderBy:"createdAt_ASC"},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return localStorage.getItem(l)?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement("h1",null,"Chat"),r.a.createElement(ye,{orderBy:this.state.orderBy}),r.a.createElement(Ae,null)))):r.a.createElement(q,null)}}]),t}(n.Component),Ie=Object($.a)(Me);function _e(){var e=Object(O.a)(["\n  mutation CreateCarMutation($name: String!) {\n    createCar(data: {name: $name}) {\n      id\n      name\n    }\n  }\n"]);return _e=function(){return e},e}var Ue=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={name:""},a.handleFile=function(e){a.setState({nameFile:e})},a.handleCar=function(){var e=Object(we.a)(Oe.a.mark(function e(t){var n;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state.name,e.next=4,a.props.createCarMutation({variables:{name:n}});case 4:a.props.client.resetStore().then(function(){a.props.history.push("/cars")});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement("form",{onSubmit:this.handleCar},r.a.createElement("h1",null,"Create Car"),r.a.createElement(Ce.a,null,r.a.createElement(Pe.a,{htmlFor:"name"},"Name"),r.a.createElement(ne.a,{id:"name",autoComplete:"off",autoFocus:!0,onChange:function(t){return e.setState({name:t.target.value})},type:"text",value:this.state.name})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(D.a,{className:"pa3 bg-black-10 bn",disabled:!this.state.name,type:"submit",variant:"contained",color:"primary"},"Create")," ",r.a.createElement(D.a,{onClick:this.props.history.goBack},"or cancel"))))}}]),t}(r.a.Component),Be=N()(_e()),De=Object(c.compose)(Object(c.graphql)(Be,{name:"createCarMutation"}),je.a,c.withApollo)(Ue),$e=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={isEditMode:!0,imageURL:""},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.nameFile&&this.setState({isEditMode:this.props.isEditMode,imageURL:this.props.nameFile})}},{key:"handleUploadImage",value:function(e){var t=this;e.preventDefault();var a=localStorage.getItem(l),n=new FormData;n.append("file",this.uploadInput.files[0]),fetch("http://localhost:8000/upload",{method:"POST",body:n,headers:new Headers({Authorization:"Bearer "+a})}).then(function(e){e.json().then(function(e){t.setState({imageURL:e.file}),t.props.onSelectFile(e.file)})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.isEditMode&&r.a.createElement("form",{onSubmit:this.handleUploadImage.bind(this)},r.a.createElement("input",{className:"f6 link dim br1 ba ph3 pv2 fr mb2 dib black",ref:function(t){e.uploadInput=t},onChange:this.handleUploadImage.bind(this),type:"file"})),r.a.createElement("br",null),this.state.imageURL&&r.a.createElement(C,{nameFile:this.state.imageURL}))}}]),t}(r.a.Component),Qe=a(46),qe=a.n(Qe),Le=a(174),Te=a.n(Le),Re=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={queryAutocomplete:"",elemSelecteds:[]},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"elemClicked",value:function(e){var t=this;this.setState({queryAutocomplete:"",elemSelecteds:[].concat(Object(K.a)(this.state.elemSelecteds),[e])},function(){return t.props.onElemSelected(t.state.elemSelecteds)})}},{key:"handleDelete",value:function(e){var t=Object(K.a)(this.state.elemSelecteds),a=t.indexOf(e);t.splice(a,1),this.setState({elemSelecteds:t}),this.props.onElemSelected(this.state.elemSelecteds)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(qe.a,{value:this.state.queryAutocomplete,onChange:function(t){return e.setState({queryAutocomplete:t.target.value,elemSelected:{}})},type:"text",label:"Search Car"}),r.a.createElement("br",null),this.state.elemSelecteds.map(function(t,a){return r.a.createElement(Te.a,{key:a,label:t.name,onDelete:function(){return e.handleDelete(t)}})}),r.a.createElement(X,{showTitle:!1,showMore:!1,elemClicked:this.elemClicked.bind(this),query:this.state.queryAutocomplete,orderBy:this.state.orderBy}))}}]),t}(n.Component),Ve=Object($.a)(Re);function Ke(){var e=Object(O.a)(["\n  mutation CreatePostMutation($data: PostCreateInput!) {\n    createPost(data: $data) {\n      id\n      title\n      text\n      nameFile\n    }\n  }\n"]);return Ke=function(){return e},e}var We=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",text:"",nameFile:"",idCars:[]},a.handlePost=function(){var e=Object(we.a)(Oe.a.mark(function e(t){var n,r,s,i,l;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state,r=n.title,s=n.text,i=n.nameFile,l=a.state.idCars,e.next=5,a.props.createPostMutation({variables:{data:{title:r,text:s,nameFile:i,cars:{connect:l}}}});case 5:a.props.history.replace("/drafts");case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"onElemSelected",value:function(e){var t=e.map(function(e){return{id:e.id}});this.setState({idCars:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement("h1",null,"Create Draft"),r.a.createElement("input",{autoFocus:!0,className:"w-100 pa2 mv2 br2 b--black-20 bw1",onChange:function(t){return e.setState({title:t.target.value})},placeholder:"Title",type:"text",value:this.state.title}),r.a.createElement("textarea",{className:"db w-100 ba bw1 b--black-20 pa2 br2 mb2",cols:50,onChange:function(t){return e.setState({text:t.target.value})},placeholder:"Content",rows:8,value:this.state.text}),r.a.createElement(Ve,{onElemSelected:this.onElemSelected.bind(this)}),r.a.createElement("br",null),r.a.createElement($e,{isEditMode:!0,onSelectFile:function(t){e.setState({nameFile:t})}}),r.a.createElement("br",null),r.a.createElement(D.a,{onClick:this.handlePost,variant:"contained",color:"primary"},"+ Create Post"),r.a.createElement(D.a,{onClick:this.props.history.goBack},"Cancel")))}}]),t}(r.a.Component),Ye=N()(Ke()),Je=Object(c.compose)(Object(c.graphql)(Ye,{name:"createPostMutation"}),je.a)(We),He=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},"404 Error !!",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,{to:"/"},"Home")))}}]),t}(n.Component),ze=Object($.a)(He);function Ge(){var e=Object(O.a)(["\n  mutation deletePost($id: ID!) {\n    deletePost(id: $id) {\n      id\n    }\n  }\n"]);return Ge=function(){return e},e}function Xe(){var e=Object(O.a)(["\n  mutation publish($id: ID!) {\n    publish(id: $id) {\n      id\n      isPublished\n    }\n  }\n"]);return Xe=function(){return e},e}function Ze(){var e=Object(O.a)(["\n  query PostQuery($id: ID!) {\n    post(id: $id) {\n      id\n      title\n      text\n      isPublished\n      nameFile\n      cars {\n        id\n        name\n      }\n      author {\n        id\n        name\n      }\n    }\n  }\n"]);return Ze=function(){return e},e}var et=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(s))))._renderAction=function(e){var t=e.id;return e.isPublished?r.a.createElement(D.a,{onClick:function(){return a.deletePost(t)}},"Delete"):r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{onClick:function(){return a.publishDraft(t)}},"Publish")," ",r.a.createElement(D.a,{onClick:function(){return a.deletePost(t)}},"Delete"))},a.deletePost=function(){var e=Object(we.a)(Oe.a.mark(function e(t){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.deletePost({variables:{id:t}});case 2:a.props.history.replace("/");case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.publishDraft=function(){var e=Object(we.a)(Oe.a.mark(function e(t){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.publishDraft({variables:{id:t}});case 2:a.props.history.replace("/");case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){if(this.props.postQuery.error)return r.a.createElement(ze,null);if(this.props.postQuery.loading)return r.a.createElement(A,null);var e=this.props.postQuery.post,t=this._renderAction(e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement("h1",{className:"f3 black-80 fw4 lh-solid"},e.title," by ",r.a.createElement(w.a,{to:"/user/"+e.author.id,title:"Feed"},e.author.name)),r.a.createElement("p",{className:"black-80 fw3"},e.text),e.cars.map(function(e){return r.a.createElement(w.a,{to:"/car/"+e.id,title:"Car",key:e.id},e.name,r.a.createElement("br",null))}),r.a.createElement(C,{nameFile:e.nameFile}),t)))}}]),t}(r.a.Component),tt=N()(Ze()),at=N()(Xe()),nt=N()(Ge()),rt=Object(c.compose)(Object(c.graphql)(tt,{name:"postQuery",options:function(e){return{variables:{id:e.match.params.id}}}}),Object(c.graphql)(at,{name:"publishDraft"}),Object(c.graphql)(nt,{name:"deletePost"}),je.a)(et);function st(){var e=Object(O.a)(["\n  query Me {\n    me {\n      id\n      role\n    }\n  }\n"]);return st=function(){return e},e}function it(){var e=Object(O.a)(["\n  mutation deleteCar($where: CarWhereUniqueInput!) {\n    deleteCar(where: $where) {\n      id\n    }\n  }\n"]);return it=function(){return e},e}function lt(){var e=Object(O.a)(["\n  query CarQuery($where: CarWhereUniqueInput!) {\n    car(where: $where) {\n      id\n      name\n    }\n  }\n"]);return lt=function(){return e},e}var ot=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).deleteCar=function(){var e=Object(we.a)(Oe.a.mark(function e(t){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.deleteCar({variables:{where:{id:t}}});case 2:a.props.client.resetStore().then(function(){a.props.history.push("/cars")});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){if(this.props.me.loading)return r.a.createElement(A,{endpoint:Object({NODE_ENV:"production",PUBLIC_URL:"/nappy"}).REACT_APP_GRAPHQL_ENDPOINT});if(this.props.carQuery.loading)return r.a.createElement(A,{endpoint:Object({NODE_ENV:"production",PUBLIC_URL:"/nappy"}).REACT_APP_GRAPHQL_ENDPOINT});var e=this.props.carQuery.car;if(!e)return r.a.createElement(ze,null);var t=this._renderAction(e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement("h1",{className:"f3 black-80 fw4 lh-solid"},e.name),r.a.createElement("p",{className:"black-80 fw3"},e.text),t)))}},{key:"_renderAction",value:function(e){var t=this,a=e.id;return r.a.createElement(D.a,{disabled:"ADMIN"!==this.props.me.me.role,onClick:function(){return t.deleteCar(a)}},"ADMIN"!==this.props.me.me.role?r.a.createElement("p",null,"Must be an admin to delete"):r.a.createElement("div",null,r.a.createElement(J.a,null,"arrow_back")," ","Delete"))}}]),t}(r.a.Component),ct=N()(lt()),ut=N()(it()),mt=N()(st()),pt=Object(c.compose)(Object(c.graphql)(ct,{name:"carQuery",options:function(e){return{fetchPolicy:"network-only",variables:{where:{id:e.match.params.id}}}}}),Object(c.graphql)(ut,{name:"deleteCar"}),Object(c.graphql)(mt,{name:"me"}),je.a,c.withApollo)(ot);function ht(){var e=Object(O.a)(["\n  query UsersQueryConnection($after: String, $orderBy: UserOrderByInput, $where: UserWhereInput, $skip: Int) {\n    usersConnection(after: $after, orderBy: $orderBy, where: $where, first: 5, skip: $skip) {\n      pageInfo {\n        hasNextPage\n        endCursor\n      }\n      edges {\n        node {\n          id\n          role\n          email\n          name\n        }\n      }\n      aggregate {\n        count\n      }\n    }\n  }\n"]);return ht=function(){return e},e}var dt=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={query:"",orderBy:"name_ASC"},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this;if(this.props.usersQueryConnection.error)return r.a.createElement(q,null);if(this.props.usersQueryConnection.loading)return r.a.createElement(A,null);var t=this.props.usersQueryConnection.usersConnection.edges;return r.a.createElement(r.a.Fragment,null,t&&t.map(function(t){return r.a.createElement("div",{className:"cursor",key:t.node.id,onClick:function(){return e.props.elemClicked(t.node)}},r.a.createElement("h3",{className:"black"},r.a.createElement(J.a,null,"fingerprint"),t.node.name),"Email: ",t.node.email,r.a.createElement("br",null),"Role: ",t.node.role)}),this.props.children)}}]),t}(r.a.Component),ft=N()(ht()),vt=Object(c.graphql)(ft,{name:"usersQueryConnection",fetchPolicy:"network-only",options:function(e){return{variables:{orderBy:e.orderBy,where:{name_contains:e.query}}}}})(dt),Et=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={query:"",orderBy:"name_ASC"},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"elemClicked",value:function(e){this.props.history.push("/user/"+e.id)}},{key:"render",value:function(){var e=this;return localStorage.getItem(l)?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement("div",{className:"flex justify-between items-center"},r.a.createElement("h1",null,"Users")),r.a.createElement(qe.a,{onChange:function(t){return e.setState({query:t.target.value})},value:this.state.query,type:"text",label:"Search"}),r.a.createElement(vt,{showWhenQueryEmpty:!0,query:this.state.query,showTitle:!0,showMore:!0,elemClicked:this.elemClicked.bind(this),orderBy:this.state.orderBy})))):r.a.createElement(q,null)}}]),t}(r.a.Component),bt=Object($.a)(Et),yt=a(74),gt=a(116),Ot=a.n(gt),wt=a(38),jt=a.n(wt),kt=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce.a,null,r.a.createElement(Pe.a,{htmlFor:"name"},"Name"),r.a.createElement(ne.a,{id:"name",onChange:function(t){return e.props.updateUserData(Object(yt.a)({},e.props.user,{name:t.target.value}))},placeholder:"name",type:"text",value:this.props.user.name})),r.a.createElement(Ce.a,null,r.a.createElement(Pe.a,{htmlFor:"email"},"Email"),r.a.createElement(ne.a,{id:"email",onChange:function(t){return e.props.updateUserData(Object(yt.a)({},e.props.user,{email:t.target.value}))},placeholder:"email",type:"text",value:this.props.user.email})),r.a.createElement(Ce.a,null,r.a.createElement(Pe.a,{htmlFor:"role"},"Role"),r.a.createElement(Ot.a,{inputProps:{name:"role",id:"role"},onChange:function(t){return e.props.updateUserData(Object(yt.a)({},e.props.user,{role:t.target.value}))},value:this.props.user.role},r.a.createElement(jt.a,{value:"CUSTOMER"},"CUSTOMER"),r.a.createElement(jt.a,{value:"ADMIN"},"ADMIN"))),r.a.createElement($e,{isEditMode:!0,nameFile:this.props.user.nameFile,onSelectFile:function(t){return e.props.updateUserData(Object(yt.a)({},e.props.user,{nameFile:t}))}}))}}]),t}(r.a.Component);function Ct(){var e=Object(O.a)(["\n  mutation CreateUserMutation($data: UserCreateInput!) {\n    createUser(data: $data) {\n      name\n      email\n      role\n      nameFile\n    }\n  }\n"]);return Ct=function(){return e},e}var St=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={user:{id:"",name:"",email:"",role:"",nameFile:""}},a.createUser=function(){var e=a.state.user,t=e.name,n=e.email,r=e.role,s=e.nameFile;a.props.createUser({variables:{data:{name:t,email:n,role:r,nameFile:s,validateEmailToken:"",password:"",resetPasswordToken:""}}})},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"updateUserData",value:function(e){this.setState({user:e})}},{key:"render",value:function(){var e=this;return localStorage.getItem(l)?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement("div",{className:"flex justify-between items-center"},r.a.createElement("h1",{className:"f3 black-80 fw4 lh-solid"},this.state.user.name)),r.a.createElement(kt,{updateUserData:this.updateUserData.bind(this),user:this.state.user}),r.a.createElement("div",null,r.a.createElement(D.a,{onClick:function(){return e.createUser()}},"Save"))))):r.a.createElement(q,null)}}]),t}(r.a.Component),Pt=N()(Ct()),Nt=Object(c.compose)(Object(c.graphql)(Pt,{name:"createUser"}),je.a,c.withApollo)(St),xt=a(175),Ft=a.n(xt);function At(){var e=Object(O.a)(["\n  mutation deleteUser($id: ID!) {\n    deleteUser(id: $id) {\n      id\n    }\n  }\n"]);return At=function(){return e},e}function Mt(){var e=Object(O.a)(["\n  query UserQuery($where: UserWhereUniqueInput!) {\n    user(where: $where) {\n      id\n      email\n      role\n      name\n      nameFile\n      posts {\n        id\n        title\n        text\n        nameFile\n      }\n    }\n  }\n"]);return Mt=function(){return e},e}function It(){var e=Object(O.a)(["\n  mutation UpdateUserMutation($data: UserUpdateInput!, $where: UserWhereUniqueInput!) {\n    updateUser(data: $data, where: $where) {\n      id\n      name\n      email\n      role\n      nameFile\n    }\n  }\n"]);return It=function(){return e},e}var _t=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,isEditMode:!1},a.isUserMyself=function(){return JSON.parse(localStorage.getItem("userToken")).id===a.props.userQuery.user.id},a.updateUser=function(){var e=Object(we.a)(Oe.a.mark(function e(t){var n,r,s,i,l;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.userQuery.user,r=n.name,s=n.email,i=n.role,l=n.nameFile,e.next=3,a.props.updateUser({variables:{where:{id:t},data:{name:r,email:s,role:i,nameFile:l}}});case 3:a.setState({isEditMode:!1});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.deleteUser=function(){var e=Object(we.a)(Oe.a.mark(function e(t){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.deleteUser({variables:{id:t}});case 2:a.props.client.resetStore().then(function(){a.props.history.push("/users")});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"updateUserData",value:function(e){this.props.userQuery.user=e,this.forceUpdate()}},{key:"render",value:function(){var e=this;if(this.props.userQuery.error)return r.a.createElement(q,null);if(!this.props.userQuery.user)return r.a.createElement(ze,null);if(this.props.userQuery.loading)return r.a.createElement(A,null);var t=localStorage.getItem(l);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement("div",{className:"flex justify-between items-center"},r.a.createElement("h1",{className:"f3 black-80 fw4 lh-solid"},this.props.userQuery.user.name," ",r.a.createElement(J.a,{onClick:function(){return e.setState({isEditMode:!e.state.isEditMode})}},"border_color")),this.isUserMyself()&&r.a.createElement(Ft.a,{title:"Change your password"},r.a.createElement(J.a,{onClick:function(){return e.props.history.push("/updatePassword")}},"security"))),this.state.isEditMode&&r.a.createElement(kt,{updateUserData:this.updateUserData.bind(this),user:this.props.userQuery.user}),!this.state.isEditMode&&r.a.createElement("div",null,r.a.createElement("p",{className:"black-80 fw3"},"Role: ",this.props.userQuery.user.role),r.a.createElement($e,{isEditMode:!1,nameFile:this.props.userQuery.user.nameFile})),r.a.createElement("div",null,this.state.isEditMode&&r.a.createElement("div",null,r.a.createElement(D.a,{onClick:function(){return e.updateUser(e.props.userQuery.user.id)}},"Save")," ",!this.isUserMyself()&&r.a.createElement(D.a,{onClick:function(){return e.deleteUser(e.state.user.id)}},"Delete"))),t&&r.a.createElement("div",{className:"f6 ba ph3 pv2 mb2 black"},r.a.createElement("h1",null,"Posts from ",this.props.userQuery.user.name),this.props.userQuery.user.posts&&this.props.userQuery.user.posts.map(function(e){return r.a.createElement(S,{key:e.id,post:e})})),this.props.children)))}}]),t}(r.a.Component),Ut=N()(It()),Bt=N()(Mt()),Dt=N()(At()),$t=Object(c.compose)(Object(c.graphql)(Bt,{name:"userQuery",options:function(e){return{variables:{where:{id:e.match.params.id}}}}}),Object(c.graphql)(Ut,{name:"updateUser"}),Object(c.graphql)(Dt,{name:"deleteUser"}),je.a,c.withApollo)(_t),Qt=a(176),qt=a.n(Qt),Lt=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={message:""},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"callApi",value:function(){var e=this;qt.a.get("http://localhost:4000/user").then(function(t){e.setState({message:t.data})}).catch(function(){})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement("h2",null,"API"),r.a.createElement(D.a,{onClick:function(){return e.callApi()},variant:"contained",color:"primary"},"Call API"),this.state.message&&r.a.createElement(F.a,null,r.a.createElement("pre",null,JSON.stringify(this.state.message,null,2))))))}}]),t}(r.a.Component),Tt=a(177),Rt=a.n(Tt),Vt=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={messageSnackBar:"",openSnackBar:!1},a.handleClose=function(e,t){"clickaway"!==t&&a.setState({openSnackBar:!1})},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"_openSnackBar",value:function(e){this.setState({messageSnackBar:e,openSnackBar:!0})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Rt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.openSnackBar,autoHideDuration:5e3,onClose:this.handleClose,message:r.a.createElement("span",null,this.state.messageSnackBar)}))}}]),t}(n.Component);function Kt(){var e=Object(O.a)(["\n  mutation ForgetPasswordMutation($email: String!) {\n    forgetPassword(email: $email) {\n      name\n      id\n      resetPasswordExpires\n    }\n  }\n"]);return Kt=function(){return e},e}var Wt=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={email:""},a._confirm=Object(we.a)(Oe.a.mark(function e(){var t,n;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.email,e.next=3,a.props.forgetPasswordMutation({variables:{email:t}}).then(function(e){n="A mail has been sent with a link available until\n        ".concat(new Date(e.data.forgetPassword.resetPasswordExpires).toLocaleString())}).catch(function(e){n=e.graphQLErrors[0].message});case 3:a.child._openSnackBar(n);case 4:case"end":return e.stop()}},e,this)})),a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement("h4",{className:"mv3"},"Forget Password"),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement(qe.a,{value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})},type:"text",label:"Your email address"})),r.a.createElement("div",{className:"flex mt3"},r.a.createElement(D.a,{variant:"contained",onClick:function(){return e._confirm()}},"Ok")),r.a.createElement(Vt,{ref:function(t){e.child=t}})))}}]),t}(n.Component),Yt=N()(Kt()),Jt=Object(c.compose)(Object(c.graphql)(Yt,{name:"forgetPasswordMutation"}))(Wt);function Ht(){var e=Object(O.a)(["\n  mutation LoginMutation($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        name\n        id\n      }\n    }\n  }\n"]);return Ht=function(){return e},e}var zt=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",name:""},a._confirm=Object(we.a)(Oe.a.mark(function e(){var t,n,r;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.email,r=t.password,e.next=3,a.props.loginMutation({variables:{email:n,password:r}}).then(function(e){var t=e.data.login,n=t.token,r=t.user;a._saveUserData(n,r)}).catch(function(e){a.child._openSnackBar(e.graphQLErrors[0].message)});case 3:case"end":return e.stop()}},e,this)})),a._saveUserData=function(e,t){localStorage.setItem(l,e),localStorage.setItem("userToken",JSON.stringify(t)),a.props.client.resetStore().then(function(){a.props.history.push("/")})},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement("h4",{className:"mv3"},"Login"),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement(qe.a,{id:"email",value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})},type:"text",label:"Your email address"}),r.a.createElement(qe.a,{id:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},type:"password",label:"Password"})),r.a.createElement("div",{className:"flex mt3"},r.a.createElement(D.a,{id:"ok",variant:"contained",onClick:function(){return e._confirm()}},"Ok"),r.a.createElement(D.a,{variant:"text",onClick:function(){return e.props.history.push("/signup")}},"signup"),r.a.createElement(D.a,{variant:"text",onClick:function(){return e.props.history.push("/forgetPassword")}},"Forget Password")),r.a.createElement(Vt,{ref:function(t){e.child=t}})))}}]),t}(n.Component),Gt=N()(Ht()),Xt=Object(c.compose)(c.withApollo,Object(c.graphql)(Gt,{name:"loginMutation"}))(zt),Zt=a(57),ea=a.n(Zt),ta=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={inputValidation2:!0,isPasswordLongEnough:!0,hasLowerCase:!0,hasUpperCase:!0,hasNumber:!0,hasSpecialChar:!0,password:"",passwordMinimumLength:10},a.handleNext=function(){a.props.handleNext()},a.handleKey=function(e){13===e.charCode&&a.handleNext()},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(){this.input2.focus()}},{key:"onChange2",value:function(e){var t=this,a=!1;this.isPasswordLongEnough(e.target.value)&&this.hasLowerCase(e.target.value)&&this.hasUpperCase(e.target.value)&&this.hasNumber(e.target.value)&&this.hasSpecialChar(e.target.value)&&(a=!0),this.setState({password:e.target.value,inputValidation2:a,hasNumber:this.hasNumber(e.target.value),hasSpecialChar:this.hasSpecialChar(e.target.value),hasUpperCase:this.hasUpperCase(e.target.value),hasLowerCase:this.hasLowerCase(e.target.value),isPasswordLongEnough:this.isPasswordLongEnough(e.target.value)},function(){t.props.onChange2(t.state)})}},{key:"hasLowerCase",value:function(e){return e.toUpperCase()!==e}},{key:"hasUpperCase",value:function(e){return e.toLowerCase()!==e}},{key:"hasNumber",value:function(e){return/\d/.test(e)}},{key:"hasSpecialChar",value:function(e){return!!/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]+/.test(e)}},{key:"isPasswordLongEnough",value:function(e){return e.length>this.state.passwordMinimumLength?(this.setState({isPasswordLongEnough:!0}),!0):(this.setState({isPasswordLongEnough:!1}),!1)}},{key:"render",value:function(){var e=this;return r.a.createElement(Ce.a,{className:"wrapperAnimate "+(this.props.activeStep?"focusField":"notFocusField")},r.a.createElement(Pe.a,{htmlFor:"password"},"Choose a safe password"),r.a.createElement(ne.a,{id:"password",value:this.props.password,error:!this.state.inputValidation2,onChange:this.onChange2.bind(this),type:"password",inputRef:function(t){return e.input2=t},onKeyPress:this.handleKey,endAdornment:r.a.createElement(te.a,{position:"end"},this.props.activeStep&&r.a.createElement(D.a,{onClick:this.handleNext,variant:"fab",color:"primary",mini:!0},r.a.createElement(J.a,null,"done")))}),!this.state.isPasswordLongEnough&&r.a.createElement(ea.a,null,"At least ",this.state.passwordMinimumLength," characters long."),!this.state.hasLowerCase&&r.a.createElement(ea.a,null,"At least a lower case letter."),!this.state.hasUpperCase&&r.a.createElement(ea.a,null,"At least an upper case letter."),!this.state.hasNumber&&r.a.createElement(ea.a,null,"At least an number."),!this.state.hasSpecialChar&&r.a.createElement(ea.a,null,"At least a spceial character."))}}]),t}(n.Component),aa=a(97),na=a.n(aa);function ra(){var e=Object(O.a)(["\n  mutation SignupMutation($email: String!, $password: String!, $name: String!, $nameFile: String!) {\n    signup(email: $email, password: $password, name: $name, nameFile:$nameFile) {\n      token\n      user {\n        name\n        id\n      }\n    }\n  }\n"]);return ra=function(){return e},e}var sa=a(398),ia=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",emailValidation:!0,inputValidation2:!0,password:"",name:"",isPasswordActiveStep:!1,nameFile:"",activeStep:0,maxStep:3},a.handleNext=function(){a.state.name&&(0===a.state.activeStep&&a.setState({activeStep:a.state.activeStep+1},function(){a.input1.focus()}),1===a.state.activeStep&&a.state.emailValidation&&a.setState({activeStep:a.state.activeStep+1},function(){a.setState({isPasswordActiveStep:!0})}),2===a.state.activeStep&&a.state.inputValidation2&&a.setState({activeStep:a.state.activeStep+1},function(){a._confirm()}))},a.handleKey=function(e){13===e.charCode&&a.handleNext()},a._confirm=Object(we.a)(Oe.a.mark(function e(){var t,n,r,s,i;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.name,r=t.email,s=t.password,i=t.nameFile,e.next=3,a.props.signupMutation({variables:{name:n,email:r,password:s,nameFile:i}}).then(function(e){var t=e.data.signup,n=t.token,r=t.user;a._saveUserData(n,r)}).catch(function(e){e.graphQLErrors.length?a.child._openSnackBar(e.graphQLErrors[0].message):a.child._openSnackBar("error: No connection with server")});case 3:case"end":return e.stop()}},e,this)})),a._saveUserData=function(e,t){localStorage.setItem(l,e),localStorage.setItem("userToken",JSON.stringify(t)),a.props.client.resetStore().then(function(){a.props.history.push("/")})},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"onChange2",value:function(e){this.setState({password:e.password,inputValidation2:e.inputValidation2})}},{key:"onChange1",value:function(e){this.setState({email:e.target.value}),this.validateEmail(e.target.value)?this.setState({emailValidation:!0}):this.setState({emailValidation:!1})}},{key:"validateEmail",value:function(e){return sa.validate(e)}},{key:"calculateBuffer",value:function(){var e="";0===this.state.activeStep&&(e=this.state.name),1===this.state.activeStep&&(e=this.state.email),2===this.state.activeStep&&(e=this.state.password);var t=e.length/10>1?1:e.length/10;return 100*(this.state.activeStep+t)/this.state.maxStep}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement("h4",{className:"mv3"},"Sign Up"),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement(na.a,{variant:"buffer",value:100*this.state.activeStep/this.state.maxStep,valueBuffer:this.calculateBuffer()}),r.a.createElement("br",null),r.a.createElement("div",{className:"tac"},r.a.createElement(Ce.a,{className:"wrapperAnimate "+(0===this.state.activeStep?"focusField":"notFocusField")},r.a.createElement(Pe.a,{htmlFor:"name"},"Your name"),r.a.createElement(ne.a,{id:"name",value:this.state.name,inputRef:function(t){return e.input0=t},onChange:function(t){return e.setState({name:t.target.value})},type:"text",onKeyPress:this.handleKey,endAdornment:r.a.createElement(te.a,{position:"end"},0===this.state.activeStep&&r.a.createElement(D.a,{onClick:this.handleNext,variant:"fab",color:"primary",mini:!0},r.a.createElement(J.a,null,"navigate_next")))})),r.a.createElement("br",null),r.a.createElement("br",null),this.state.activeStep>=1&&r.a.createElement(Ce.a,{className:"wrapperAnimate "+(1===this.state.activeStep?"focusField":"notFocusField")},r.a.createElement(Pe.a,{htmlFor:"email"},"Your email address"),r.a.createElement(ne.a,{id:"email",value:this.state.email,error:!this.state.emailValidation,onChange:this.onChange1.bind(this),type:"text",inputRef:function(t){return e.input1=t},onKeyPress:this.handleKey,endAdornment:r.a.createElement(te.a,{position:"end"},1===this.state.activeStep&&r.a.createElement(D.a,{onClick:this.handleNext,variant:"fab",color:"primary",mini:!0},r.a.createElement(J.a,null,"navigate_next")))})),r.a.createElement("br",null),r.a.createElement("br",null),this.state.activeStep>=2&&r.a.createElement(ta,{handleNext:this.handleNext.bind(this),activeStep:this.state.isPasswordActiveStep,onChange2:this.onChange2.bind(this)}))),r.a.createElement(Vt,{ref:function(t){e.child=t}})))}}]),t}(n.Component),la=N()(ra()),oa=Object(c.compose)(c.withApollo,Object(c.graphql)(la,{name:"signupMutation"}))(ia);function ca(){var e=Object(O.a)(["\n  mutation ResetPasswordMutation($password: String!, $resetPasswordToken: String!) {\n    resetPassword(password: $password, resetPasswordToken: $resetPasswordToken) {\n      token\n      user {\n        name\n        id\n      }\n    }\n  }\n"]);return ca=function(){return e},e}var ua=a(162),ma=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={password:"",password2:"",resetPasswordToken:""},a._confirm=Object(we.a)(Oe.a.mark(function e(){var t,n,r,s;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.password===a.state.password2){e.next=3;break}return a.child._openSnackBar("Error: Passwords are differents"),e.abrupt("return");case 3:return n=a.state,r=n.password,s=n.resetPasswordToken,e.next=6,a.props.resetPasswordMutation({variables:{resetPasswordToken:s,password:r}}).then(function(e){t="Your password has been reset successfully!";var n=e.data.resetPassword,r=n.token,s=n.user;a._saveUserData(r,s)}).catch(function(e){t=e.graphQLErrors[0].message});case 6:a.child._openSnackBar(t);case 7:case"end":return e.stop()}},e,this)})),a._saveUserData=function(e,t){localStorage.setItem(l,e),localStorage.setItem("userToken",JSON.stringify(t))},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=ua.parse(this.props.location.search).resetPasswordToken;e&&this.setState({resetPasswordToken:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement("h4",{className:"mv3"},"Reset Password"),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement(qe.a,{value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},type:"password",label:"Choose a safe password"}),r.a.createElement(qe.a,{value:this.state.password2,onChange:function(t){return e.setState({password2:t.target.value})},type:"password",label:"Retype your safe password"})),r.a.createElement("div",{className:"flex mt3"},r.a.createElement(D.a,{variant:"contained",onClick:function(){return e._confirm()}},"Ok")),r.a.createElement(Vt,{ref:function(t){e.child=t}})))}}]),t}(n.Component),pa=N()(ca()),ha=Object(c.compose)(Object(c.graphql)(pa,{name:"resetPasswordMutation"}))(ma),da=a(99),fa=a.n(da);function va(){var e=Object(O.a)(["\n  mutation UpdatePasswordMutation($oldPassword: String!, $newPassword: String!) {\n    updatePassword(oldPassword: $oldPassword, newPassword: $newPassword) {\n      id\n    }\n  }\n"]);return va=function(){return e},e}var Ea=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={oldPassword:"",newPassword:"",newPassword2:"",activeStep:0,maxStep:3},a.handleNext=function(){a.state.oldPassword&&(a.setState({activeStep:a.state.activeStep+1},function(){1===this.state.activeStep&&this.input1.focus(),2===this.state.activeStep&&this.input2.focus()}),2===a.state.activeStep&&a._confirm())},a.handleKey=function(e){13===e.charCode&&a.handleNext()},a._confirm=Object(we.a)(Oe.a.mark(function e(){var t,n,r,s;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.newPassword&&a.state.newPassword2&&a.state.oldPassword){e.next=4;break}return a.setState({activeStep:0}),a.child._openSnackBar("Password cannot be null"),e.abrupt("return");case 4:if(a.state.newPassword===a.state.newPassword2){e.next=8;break}return a.setState({activeStep:1}),a.child._openSnackBar("Error: Passwords are differents"),e.abrupt("return");case 8:return n=a.state,r=n.oldPassword,s=n.newPassword,e.next=11,a.props.updatePasswordMutation({variables:{oldPassword:r,newPassword:s}}).then(function(){t="Your password has been changed successfully!",a.setState({oldPassword:"",newPassword:"",newPassword2:"",activeStep:0})}).catch(function(e){a.setState({activeStep:0}),t=e.graphQLErrors[0].message});case 11:a.child._openSnackBar(t);case 12:case"end":return e.stop()}},e,this)})),a._saveUserData=function(e,t){localStorage.setItem(l,e),localStorage.setItem("userToken",JSON.stringify(t))},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"calculateBuffer",value:function(){var e="";0===this.state.activeStep&&(e=this.state.oldPassword),1===this.state.activeStep&&(e=this.state.newPassword),2===this.state.activeStep&&(e=this.state.newPassword2);var t=e.length/10>1?1:e.length/10;return 100*(this.state.activeStep+t)/this.state.maxStep}},{key:"showPassword",value:function(e){0===e&&this.setState({showPassword0:!this.state.showPassword0}),1===e&&this.setState({showPassword1:!this.state.showPassword1}),2===e&&this.setState({showPassword2:!this.state.showPassword2})}},{key:"render",value:function(){var e=this;return localStorage.getItem(l)?r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement("h4",{className:"mv3"},"Change Password"),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement(na.a,{variant:"buffer",value:100*this.state.activeStep/this.state.maxStep,valueBuffer:this.calculateBuffer()}),r.a.createElement("br",null),r.a.createElement("div",{className:"tac"},r.a.createElement(Ce.a,{className:"wrapperAnimate "+(0===this.state.activeStep?"focusField":"notFocusField")},r.a.createElement(Pe.a,{htmlFor:"oldPassword"},"Your actual password"),r.a.createElement(ne.a,{id:"oldPassword",value:this.state.oldPassword,onChange:function(t){return e.setState({oldPassword:t.target.value})},type:this.state.showPassword0?"text":"password",inputRef:function(t){return e.input0=t},className:"wrapperAnimate "+(0===this.state.activeStep?"focusField":"notFocusField"),onKeyPress:this.handleKey,endAdornment:r.a.createElement(te.a,{position:"end"},0===this.state.activeStep&&r.a.createElement(D.a,{onClick:this.handleNext,variant:"fab",color:"primary",mini:!0},r.a.createElement(J.a,null,"navigate_next"))),startAdornment:r.a.createElement(te.a,{position:"start"},0===this.state.activeStep&&r.a.createElement(fa.a,{onClick:function(){return e.showPassword(0)}},r.a.createElement(J.a,null,this.state.showPassword0?"visibility_off":"visibility")))})),r.a.createElement("br",null),r.a.createElement("br",null),this.state.activeStep>=1&&r.a.createElement(Ce.a,{className:"wrapperAnimate "+(1===this.state.activeStep?"focusField":"notFocusField")},r.a.createElement(Pe.a,{htmlFor:"newPassword"},"Choose a safe password"),r.a.createElement(ne.a,{id:"newPassword",value:this.state.newPassword,onChange:function(t){return e.setState({newPassword:t.target.value})},type:this.state.showPassword1?"text":"password",inputRef:function(t){return e.input1=t},onKeyPress:this.handleKey,startAdornment:r.a.createElement(te.a,{position:"start"},1===this.state.activeStep&&r.a.createElement(fa.a,{onClick:function(){return e.showPassword(1)}},r.a.createElement(J.a,null,this.state.showPassword0?"visibility_off":"visibility"))),endAdornment:r.a.createElement(te.a,{position:"end"},1===this.state.activeStep&&r.a.createElement(D.a,{onClick:this.handleNext,variant:"fab",color:"primary",mini:!0},r.a.createElement(J.a,null,"navigate_next")))})),r.a.createElement("br",null),r.a.createElement("br",null),this.state.activeStep>=2&&r.a.createElement(Ce.a,{className:"wrapperAnimate "+(2===this.state.activeStep?"focusField":"notFocusField")},r.a.createElement(Pe.a,{htmlFor:"newPassword2"},"Choose a safe password"),r.a.createElement(ne.a,{id:"newPassword2",value:this.state.newPassword2,onChange:function(t){return e.setState({newPassword2:t.target.value})},type:this.state.showPassword2?"text":"password",label:"Retype your safe password",inputRef:function(t){return e.input2=t},onKeyPress:this.handleKey,startAdornment:r.a.createElement(te.a,{position:"start"},2===this.state.activeStep&&r.a.createElement(fa.a,{onClick:function(){return e.showPassword(2)}},r.a.createElement(J.a,null,this.state.showPassword0?"visibility_off":"visibility"))),endAdornment:r.a.createElement(te.a,{position:"end"},2===this.state.activeStep&&r.a.createElement(D.a,{onClick:this.handleNext,variant:"fab",color:"primary",mini:!0},r.a.createElement(J.a,null,"done")))}))),r.a.createElement("div",null,r.a.createElement(D.a,{variant:"contained",onClick:function(){return e._confirm()}},"Ok"))),r.a.createElement(Vt,{ref:function(t){e.child=t}}))):r.a.createElement(q,null)}}]),t}(n.Component),ba=N()(va()),ya=Object(c.compose)(Object(c.graphql)(ba,{name:"updatePasswordMutation"}))(Ea);function ga(){var e=Object(O.a)(["\n  mutation ValidateEmailMutation($validateEmailToken: String!) {\n    validateEmail(validateEmailToken: $validateEmailToken) {\n      token\n      user {\n        name\n        emailvalidated\n        id\n      }\n    }\n  }\n"]);return ga=function(){return e},e}var Oa=a(162),wa=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",validateEmailToken:""},a.validateEmailMutation=function(){var e=Object(we.a)(Oe.a.mark(function e(t){var n;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.validateEmailMutation({variables:{validateEmailToken:t}}).then(function(e){var t=e.data.validateEmail,r=t.token,s=t.user;a._saveUserData(r,s),n="".concat(s.name,", your email is now validated.")}).catch(function(e){n=e.graphQLErrors[0].message});case 2:a.child._openSnackBar(n);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a._saveUserData=function(){a.props.client.resetStore().then(function(){})},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Oa.parse(this.props.location.search).validateEmailToken;e&&this.validateEmailMutation(e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement("h4",{className:"mv3"},"Email Validation"),r.a.createElement("div",{className:"flex flex-column"}),r.a.createElement(Vt,{ref:function(t){e.child=t}})))}}]),t}(n.Component),ja=N()(ga()),ka=Object(c.compose)(Object(c.graphql)(ja,{name:"validateEmailMutation"}),c.withApollo)(wa),Ca=a(420),Sa=a(422),Pa=a(419);function Na(){var e=Object(O.a)(["\n  mutation sendLinkValidateEmailMutation {\n    sendLinkValidateEmail {\n      email\n    }\n  }\n"]);return Na=function(){return e},e}var xa=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={interval:0},a.sendEmail=Object(we.a)(Oe.a.mark(function e(){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.startTimer(),e.next=3,a.props.sendLinkValidateEmailMutation({variables:{}}).then(function(e){var t="Email sent successfully to ".concat(e.data.sendLinkValidateEmail.email,"!");a.child._openSnackBar(t)}).catch(function(e){a.child._openSnackBar(e.graphQLErrors[0].message)});case 3:case"end":return e.stop()}},e,this)})),a.startTimer=function(){a.initTimer();var e=setInterval(a.timer,1e3);a.setState({intervalId:e})},a.timer=function(){a.state.interval>0?a.setState({interval:a.state.interval-1}):clearTimeout(a.state.intervalId)},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("span",null,this.state.interval?r.a.createElement("span",null,"wait ",this.state.interval,"s to resend."):r.a.createElement(D.a,{variant:"contained",onClick:function(){return e.sendEmail()}},"Resend Email"),r.a.createElement(Vt,{ref:function(t){e.child=t}}))}},{key:"initTimer",value:function(){this.setState({interval:40})}}]),t}(n.Component),Fa=N()(Na()),Aa=Object(c.compose)(Object(c.graphql)(Fa,{name:"sendLinkValidateEmailMutation"}))(xa);function Ma(){var e=Object(O.a)(["\n  query Me {\n    me {\n      id\n      emailvalidated\n    }\n  }\n"]);return Ma=function(){return e},e}var Ia=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={interval:0},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return this.props.me.loading?r.a.createElement(A,null):this.props.me.error?r.a.createElement(q,null):localStorage.getItem(l)&&!this.props.me.me.emailvalidated?r.a.createElement("div",{className:"paperOut"},r.a.createElement(F.a,{className:"paperIn"},r.a.createElement(J.a,null,"error_outline")," ","Email not validated.",r.a.createElement(Aa,null))):r.a.createElement("div",null)}}]),t}(n.Component),_a=N()(Ma()),Ua=Object(c.compose)(Object(c.graphql)(_a,{name:"me"}))(Ia),Ba=a(178),Da=a.n(Ba),$a=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={anchorEl:null},a.handleClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(e){a.setState({anchorEl:null}),"profile"===e&&a.props.history.push("/user/"+a.props.user.id),"logout"===e&&(localStorage.removeItem(l),a.props.history.replace("/login")),a.setState({open:!1})},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state.anchorEl;return r.a.createElement("div",null,r.a.createElement(D.a,{"aria-owns":t?"simple-menu":null,"aria-haspopup":"true",onClick:this.handleClick},r.a.createElement(C,{format:"avatar",nameFile:this.props.nameFile})),r.a.createElement(Da.a,{id:"simple-menu",anchorEl:t,open:Boolean(t),onClose:this.handleClose},r.a.createElement(jt.a,{onClick:function(){return e.handleClose("profile")}},"Profile"),r.a.createElement(jt.a,{onClick:function(){return e.handleClose("logout")}},"Logout")))}}]),t}(n.Component),Qa=Object($.a)($a);function qa(){var e=Object(O.a)(["\n    query Me {\n      me {\n        id\n        email\n        role\n        name\n        nameFile\n      }\n    }\n  "]);return qa=function(){return e},e}var La=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=localStorage.getItem(l);return r.a.createElement("div",null,e?r.a.createElement("div",null,this.props.me.me&&r.a.createElement(Qa,{user:this.props.me.me,nameFile:this.props.me.me.nameFile})):r.a.createElement("div",null,this.props.me.me&&r.a.createElement("div",null,"Hi ",this.props.me.me.name,"!")),!e&&r.a.createElement(w.a,{to:"/login",className:"ml1 no-underline black"},"login"))}}]),t}(n.Component),Ta=N()(qa()),Ra=Object(c.compose)(Object(c.graphql)(Ta,{name:"me"}),c.withApollo)(La),Va=a(179),Ka=a.n(Va),Wa=a(180),Ya=a.n(Wa),Ja=r.a.createContext(),Ha=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ja.Consumer,null,function(t){return r.a.createElement("div",null,"/"!==e.props.history.location.pathname?r.a.createElement(D.a,{onClick:e.props.history.goBack},r.a.createElement(J.a,null,"arrow_back")):r.a.createElement(D.a,{onClick:t.toggleDrawer(!0)},r.a.createElement(J.a,null,"menu")))}))}}]),t}(n.Component),za=Object($.a)(Ha),Ga=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"flexGrow"},r.a.createElement(Ka.a,{position:"static"},r.a.createElement(Ya.a,null,r.a.createElement(za,null),r.a.createElement("div",{className:"flex"}),r.a.createElement(D.a,{onClick:function(){e.props.history.push("/")}},r.a.createElement(J.a,null,"home")),r.a.createElement("div",{className:"flex"}),r.a.createElement(Ra,null))))}}]),t}(n.Component),Xa=Object($.a)(Ga),Za=a(52),en=a.n(Za),tn=a(56),an=a.n(tn),nn=a(117),rn=a.n(nn),sn=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={isSideBarOpen:!1},a.toggleDrawer=function(e){return function(){a.setState({isSideBarOpen:e})}},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({isSideBarOpen:e.isSideBarOpen})}},{key:"render",value:function(){var e=localStorage.getItem(l);return r.a.createElement("div",null,r.a.createElement(rn.a,null,r.a.createElement("div",null,this.props.isMobile&&r.a.createElement(jt.a,null,r.a.createElement(en.a,null,r.a.createElement(J.a,null,"arrow_back"))),r.a.createElement(w.a,{to:"/",className:"link"},r.a.createElement(jt.a,null,r.a.createElement(en.a,null,r.a.createElement(J.a,null,"view_quilt")),r.a.createElement(an.a,{primary:"Blog"}))),r.a.createElement(w.a,{to:"/drafts",className:"link"},r.a.createElement(jt.a,null,r.a.createElement(en.a,null,r.a.createElement(J.a,null,"mode_edit")),r.a.createElement(an.a,{primary:"Drafts"}))),r.a.createElement(w.a,{to:"/cars",className:"link"},r.a.createElement(jt.a,null,r.a.createElement(en.a,null,r.a.createElement(J.a,null,"directions_car")),r.a.createElement(an.a,{primary:"Cars"}))),r.a.createElement(w.a,{to:"/chats",className:"link"},r.a.createElement(jt.a,null,r.a.createElement(en.a,null,r.a.createElement(J.a,null,"chat")),r.a.createElement(an.a,{primary:"Chat"}))),r.a.createElement(w.a,{to:"/api",className:"link"},r.a.createElement(jt.a,null,r.a.createElement(en.a,null,r.a.createElement(J.a,null,"cloud_queue")),r.a.createElement(an.a,{primary:"API"}))),r.a.createElement(w.a,{to:"/users",className:"link"},r.a.createElement(jt.a,null,r.a.createElement(en.a,null,r.a.createElement(J.a,null,"group")),r.a.createElement(an.a,{primary:"Users"}))),!e&&r.a.createElement(w.a,{to:"/login",className:"link"},r.a.createElement(jt.a,null,r.a.createElement(en.a,null,r.a.createElement(J.a,null,"account_circle")),r.a.createElement(an.a,{primary:"Login"}))))))}}]),t}(n.Component),ln=Object($.a)(sn),on=a(181),cn=a.n(on),un=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return r.a.createElement(Ja.Consumer,null,function(e){return r.a.createElement(cn.a,{variant:e.state.variant,open:e.state.isSideBarOpen,onClose:e.toggleDrawer(!1)},r.a.createElement("div",{tabIndex:0,role:"button",onClick:e.toggleDrawer(!1)},r.a.createElement(ln,{isMobile:e.state.isMobile})))})}}]),t}(n.Component),mn=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={isSideBarOpen:!1,variant:"permanent",isMobile:!1},a.toggleDrawer=function(e){return function(){(e||a.isMobile())&&a.setState({isSideBarOpen:e})}},a.resize=function(){a.setState({isMobile:a.isMobile(),variant:a.isMobile()?"persistent":"permanent",isSideBarOpen:!a.isMobile()})},a.isMobile=function(){return window.innerWidth<600},a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resize),this.setState({isMobile:this.isMobile(),variant:this.isMobile()?"persistent":"permanent",isSideBarOpen:!this.isMobile()})}},{key:"render",value:function(){return r.a.createElement(Ca.a,null,r.a.createElement("div",null,r.a.createElement(Ja.Provider,{value:{state:this.state,toggleDrawer:this.toggleDrawer}},r.a.createElement(un,null),r.a.createElement("div",{className:"desktopMargin"},r.a.createElement(Xa,null),r.a.createElement(Ua,null),r.a.createElement("div",null,r.a.createElement(Sa.a,null,r.a.createElement(Pa.a,{exact:!0,path:"/",component:U}),r.a.createElement(Pa.a,{path:"/car/create",component:De}),r.a.createElement(Pa.a,{path:"/car/:id",component:pt}),r.a.createElement(Pa.a,{path:"/drafts",component:V}),r.a.createElement(Pa.a,{path:"/cars",component:se}),r.a.createElement(Pa.a,{path:"/chats",component:Ie}),r.a.createElement(Pa.a,{path:"/users",component:bt}),r.a.createElement(Pa.a,{path:"/user/create",component:Nt}),r.a.createElement(Pa.a,{path:"/user/:id",component:$t}),r.a.createElement(Pa.a,{path:"/api",component:Lt}),r.a.createElement(Pa.a,{path:"/create",component:Je}),r.a.createElement(Pa.a,{path:"/post/:id",component:rt}),r.a.createElement(Pa.a,{path:"/login",component:Xt}),r.a.createElement(Pa.a,{path:"/signup",component:oa}),r.a.createElement(Pa.a,{path:"/forgetPassword",component:Jt}),r.a.createElement(Pa.a,{path:"/resetPassword",component:ha}),r.a.createElement(Pa.a,{path:"/updatePassword",component:ya}),r.a.createElement(Pa.a,{path:"/validateEmail",component:ka}),r.a.createElement(Pa.a,{component:ze})))))))}}]),t}(n.Component),pn=new d.a({uri:"ws://localhost:4000/",options:{reconnect:!0}}),hn=new m.HttpLink({uri:"http://localhost:4000"}),dn=new o.ApolloLink(function(e,t){var a=localStorage.getItem(l),n=a?"Bearer ".concat(a):null;return e.setContext({headers:{authorization:n}}),t(e)}).concat(hn),fn=Object(h.split)(function(e){var t=e.query,a=Object(f.e)(t),n=a.kind,r=a.operation;return"OperationDefinition"===n&&"subscription"===r},pn,dn),vn=new u.a({link:fn,cache:new p.a});i.a.render(r.a.createElement(c.ApolloProvider,{client:vn},r.a.createElement("div",null,r.a.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),r.a.createElement(mn,null))),document.getElementById("root"))}},[[184,1,2]]]);
//# sourceMappingURL=main.4b5fc87f.chunk.js.map